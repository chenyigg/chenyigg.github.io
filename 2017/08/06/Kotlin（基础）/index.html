<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Kotlin--基础语法 · Hexo</title><meta name="description" content="Kotlin--基础语法 - John Doe"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Hexo"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://weibo.com/u/1038839880" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/chenyigg" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Kotlin--基础语法</h1><div class="post-info">Aug 6, 2017</div><div class="post-content"><h1 id="kotlin"><a href="#Kotlin" class="headerlink" title="Kotlin"></a>Kotlin</h1><h3 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h3><p>包声明应处于源文件顶部</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> my.demo</div><div class="line"><span class="keyword">import</span> java.util.*</div><div class="line"><span class="comment">// ……</span></div></pre></td></tr></table></figure>
<p>目录与包的结构无需匹配：源代码可以在文件系统的任意位置。</p>
<h3 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h3><p>带有两个 Int 参数、返回 Int 的函数：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//sampleStart</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</div><div class="line">	<span class="keyword">return</span> a + b</div><div class="line">&#125;</div><div class="line"><span class="comment">//sampleEnd</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">	print(<span class="string">"sum of 3 and 5 is "</span>)</div><div class="line">	println(sum(<span class="number">3</span>, <span class="number">5</span>))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>将表达式作为函数体、返回值类型自动推断的函数：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//sampleStart</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> = a + b</div><div class="line"><span class="comment">//sampleEnd</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">	println(<span class="string">"sum of 19 and 23 is <span class="subst">$&#123;sum(<span class="number">19</span>, <span class="number">23</span>)&#125;</span>"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>函数返回无意义的值：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//sampleStart</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printSum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Unit</span> &#123;</div><div class="line">	println(<span class="string">"sum of a and b is <span class="subst">$&#123;a + b&#125;</span>"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">//sampleEnd</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>)</span></span> &#123;</div><div class="line">	printSum(<span class="number">-1</span>, <span class="number">8</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Unit 返回类型可以省略：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//sampleStart</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printSum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> &#123;</div><div class="line">	println(<span class="string">"sum of a and b is <span class="subst">$&#123;a + b&#125;</span>"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">//sampleEnd</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>)</span></span> &#123;</div><div class="line">	printSum(<span class="number">-1</span>, <span class="number">8</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="定义局部变量"><a href="#定义局部变量" class="headerlink" title="定义局部变量"></a>定义局部变量</h3><p>一次赋值（只读）的局部变量</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">  	<span class="comment">//sampleStart</span></div><div class="line">	<span class="keyword">val</span> a: <span class="built_in">Int</span> = <span class="number">1</span> <span class="comment">// 立即赋值</span></div><div class="line">	<span class="keyword">val</span> b = <span class="number">2</span> 	<span class="comment">// 自动推断出 `Int` 类型</span></div><div class="line">	<span class="keyword">val</span> c: <span class="built_in">Int</span> 	<span class="comment">// 如果没有初始值类型不能省略</span></div><div class="line">	c = <span class="number">3</span> 		<span class="comment">// 明确赋值</span></div><div class="line">	<span class="comment">//sampleEnd</span></div><div class="line">	println(<span class="string">"a = <span class="variable">$a</span>, b = <span class="variable">$b</span>, c = <span class="variable">$c</span>"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>可变变量：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    <span class="keyword">var</span> x = <span class="number">5</span> <span class="comment">// 自动推断出 `Int` 类型</span></div><div class="line">    x += <span class="number">1</span></div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">    println(<span class="string">"x = <span class="variable">$x</span>"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>正如 Java 和 JavaScript，Kotlin 支持行注释及块注释。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 这是一个行注释</span></div><div class="line"><span class="comment">/* 这是一个多行的</span></div><div class="line">	块注释。 */</div></pre></td></tr></table></figure>
<p>与 Java 不同的是，Kotlin 的块注释可以嵌套。</p>
<h3 id="使用字符串模板"><a href="#使用字符串模板" class="headerlink" title="使用字符串模板"></a>使用字符串模板</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    <span class="keyword">var</span> a = <span class="number">1</span></div><div class="line">    <span class="comment">// 模板中的简单名称：</span></div><div class="line">    <span class="keyword">val</span> s1 = <span class="string">"a is <span class="variable">$a</span>"</span></div><div class="line">    a = <span class="number">2</span></div><div class="line">    <span class="comment">// 模板中的任意表达式：</span></div><div class="line">    <span class="keyword">val</span> s2 = <span class="string">"<span class="subst">$&#123;s1.replace("is", "was")&#125;</span>, but now is <span class="variable">$a</span>"</span></div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">    println(s2)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用条件表达式"><a href="#使用条件表达式" class="headerlink" title="使用条件表达式"></a>使用条件表达式</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//sampleStart</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">maxOf</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</div><div class="line">    <span class="keyword">if</span> (a &gt; b) &#123;</div><div class="line">    	<span class="keyword">return</span> a</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">    	<span class="keyword">return</span> b</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//sampleEnd</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">	println(<span class="string">"max of 0 and 42 is <span class="subst">$&#123;maxOf(<span class="number">0</span>, <span class="number">42</span>)&#125;</span>"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="使用-if-作为表达式"><a href="#使用-if-作为表达式" class="headerlink" title="使用 if 作为表达式:"></a>使用 if 作为表达式:</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//sampleStart</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">maxOf</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> = <span class="keyword">if</span> (a &gt; b) a <span class="keyword">else</span> b</div><div class="line"><span class="comment">//sampleEnd</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">	println(<span class="string">"max of 0 and 42 is <span class="subst">$&#123;maxOf(<span class="number">0</span>, <span class="number">42</span>)&#125;</span>"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用可空值及-null-检测"><a href="#使用可空值及-null-检测" class="headerlink" title="使用可空值及 null 检测"></a>使用可空值及 null 检测</h3><p>当某个变量的值可以为 null 的时候，必须在声明处的类型后添加 ? 来标识该引用可为空。</p>
<p>如果 str 的内容不是数字返回 null ：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">parseInt</span><span class="params">(str: <span class="type">String</span>)</span></span>: <span class="built_in">Int</span>? &#123;</div><div class="line">	<span class="comment">// ……</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用返回可空值的函数：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">parseInt</span><span class="params">(str: <span class="type">String</span>)</span></span>: <span class="built_in">Int</span>? &#123;</div><div class="line">	<span class="keyword">return</span> str.toIntOrNull()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//sampleStart</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printProduct</span><span class="params">(arg1: <span class="type">String</span>, arg2: <span class="type">String</span>)</span></span> &#123;</div><div class="line">    <span class="keyword">val</span> x = parseInt(arg1)</div><div class="line">    <span class="keyword">val</span> y = parseInt(arg2)</div><div class="line">    <span class="comment">// 直接使用 `x * y` 可能会报错，因为他们可能为 null</span></div><div class="line">    <span class="keyword">if</span> (x != <span class="literal">null</span> &amp;&amp; y != <span class="literal">null</span>) &#123;</div><div class="line">        <span class="comment">// 在空检测后，x 和 y 会自动转换为非空值（non-nullable）</span></div><div class="line">        println(x * y)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">    	println(<span class="string">"either '<span class="variable">$arg1</span>' or '<span class="variable">$arg2</span>' is not a number"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//sampleEnd</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    printProduct(<span class="string">"6"</span>, <span class="string">"7"</span>)</div><div class="line">    printProduct(<span class="string">"a"</span>, <span class="string">"7"</span>)</div><div class="line">    printProduct(<span class="string">"a"</span>, <span class="string">"b"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">parseInt</span><span class="params">(str: <span class="type">String</span>)</span></span>: <span class="built_in">Int</span>? &#123;</div><div class="line">	<span class="keyword">return</span> str.toIntOrNull()</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printProduct</span><span class="params">(arg1: <span class="type">String</span>, arg2: <span class="type">String</span>)</span></span> &#123;</div><div class="line">    <span class="keyword">val</span> x = parseInt(arg1)</div><div class="line">    <span class="keyword">val</span> y = parseInt(arg2)</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    <span class="comment">// ……</span></div><div class="line">    <span class="keyword">if</span> (x == <span class="literal">null</span>) &#123;</div><div class="line">        println(<span class="string">"Wrong number format in arg1: '<span class="subst">$&#123;arg1&#125;</span>'"</span>)</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (y == <span class="literal">null</span>) &#123;</div><div class="line">        println(<span class="string">"Wrong number format in arg2: '<span class="subst">$&#123;arg2&#125;</span>'"</span>)</div><div class="line">        <span class="keyword">return</span></div><div class="line">	&#125;</div><div class="line">    <span class="comment">// 在空检测后，x 和 y 会自动转换为非空值</span></div><div class="line">    println(x * y)</div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    printProduct(<span class="string">"6"</span>, <span class="string">"7"</span>)</div><div class="line">    printProduct(<span class="string">"a"</span>, <span class="string">"7"</span>)</div><div class="line">    printProduct(<span class="string">"99"</span>, <span class="string">"b"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用类型检测及自动类型转换"><a href="#使用类型检测及自动类型转换" class="headerlink" title="使用类型检测及自动类型转换"></a>使用类型检测及自动类型转换</h3><p>is 运算符检测一个表达式是否某类型的一个实例。 如果一个不可变的局部变量或属性已经判断出为某类型，那么检测后的分支中可以直接当作该类型使用，无需显式转换：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//sampleStart</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getStringLength</span><span class="params">(obj: <span class="type">Any</span>)</span></span>: <span class="built_in">Int</span>? &#123;</div><div class="line">    <span class="keyword">if</span> (obj <span class="keyword">is</span> String) &#123;</div><div class="line">        <span class="comment">// `obj` 在该条件分支内自动转换成 `String`</span></div><div class="line">        <span class="keyword">return</span> obj.length</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 在离开类型检测分支后，`obj` 仍然是 `Any` 类型</span></div><div class="line">    <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//sampleEnd</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">printLength</span><span class="params">(obj: <span class="type">Any</span>)</span></span> &#123;</div><div class="line">        println(<span class="string">"'<span class="variable">$obj</span>' string length is <span class="subst">$&#123;getStringLength(obj) ?: "... err, not a string"&#125;</span> "</span>)</div><div class="line">    &#125;</div><div class="line">    printLength(<span class="string">"Incomprehensibilities"</span>)</div><div class="line">    printLength(<span class="number">1000</span>)</div><div class="line">    printLength(listOf(Any()))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//sampleStart</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getStringLength</span><span class="params">(obj: <span class="type">Any</span>)</span></span>: <span class="built_in">Int</span>? &#123;</div><div class="line">    <span class="keyword">if</span> (obj !<span class="keyword">is</span> String) <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">    <span class="comment">// `obj` 在这一分支自动转换为 `String`</span></div><div class="line">    <span class="keyword">return</span> obj.length</div><div class="line">&#125;</div><div class="line"><span class="comment">//sampleEnd</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">printLength</span><span class="params">(obj: <span class="type">Any</span>)</span></span> &#123;</div><div class="line">        println(<span class="string">"'<span class="variable">$obj</span>' string length is <span class="subst">$&#123;getStringLength(obj) ?: "... err, not a string"&#125;</span> "</span>)</div><div class="line">    &#125;</div><div class="line">    printLength(<span class="string">"Incomprehensibilities"</span>)</div><div class="line">    printLength(<span class="number">1000</span>)</div><div class="line">    printLength(listOf(Any()))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>甚至：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//sampleStart</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getStringLength</span><span class="params">(obj: <span class="type">Any</span>)</span></span>: <span class="built_in">Int</span>? &#123;</div><div class="line">    <span class="comment">// `obj` 在 `&amp;&amp;` 右边自动转换成 `String` 类型</span></div><div class="line">    <span class="keyword">if</span> (obj <span class="keyword">is</span> String &amp;&amp; obj.length &gt; <span class="number">0</span>) &#123;</div><div class="line">    	<span class="keyword">return</span> obj.length</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//sampleEnd</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">printLength</span><span class="params">(obj: <span class="type">Any</span>)</span></span> &#123;</div><div class="line">      	println(<span class="string">"'<span class="variable">$obj</span>' string length is <span class="subst">$&#123;getStringLength(obj) ?: "... err, is empty or not a string at all"&#125;</span> "</span>)</div><div class="line">    &#125;</div><div class="line">    printLength(<span class="string">"Incomprehensibilities"</span>)</div><div class="line">    printLength(<span class="string">""</span>)</div><div class="line">    printLength(<span class="number">1000</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用-for-循环"><a href="#使用-for-循环" class="headerlink" title="使用 for 循环"></a>使用 for 循环</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">	<span class="comment">//sampleStart</span></div><div class="line">    <span class="keyword">val</span> items = listOf(<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"kiwi"</span>)</div><div class="line">    <span class="keyword">for</span> (item <span class="keyword">in</span> items) &#123;</div><div class="line">    	println(item)</div><div class="line">    &#125;</div><div class="line">	<span class="comment">//sampleEnd</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    <span class="keyword">val</span> items = listOf(<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"kiwi"</span>)</div><div class="line">    <span class="keyword">for</span> (index <span class="keyword">in</span> items.indices) &#123;</div><div class="line">    	println(<span class="string">"item at <span class="variable">$index</span> is <span class="subst">$&#123;items[index]&#125;</span>"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用-while-循环"><a href="#使用-while-循环" class="headerlink" title="使用 while 循环"></a>使用 while 循环</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    <span class="keyword">val</span> items = listOf(<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"kiwi"</span>)</div><div class="line">    <span class="keyword">var</span> index = <span class="number">0</span></div><div class="line">    <span class="keyword">while</span> (index &lt; items.size) &#123;</div><div class="line">        println(<span class="string">"item at <span class="variable">$index</span> is <span class="subst">$&#123;items[index]&#125;</span>"</span>)</div><div class="line">        index++</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用-when-表达式"><a href="#使用-when-表达式" class="headerlink" title="使用 when 表达式"></a>使用 when 表达式</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//sampleStart</span></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">describe</span><span class="params">(obj: <span class="type">Any</span>)</span></span>: String =</div><div class="line">    <span class="keyword">when</span> (obj) &#123;</div><div class="line">        <span class="number">1</span> -&gt; <span class="string">"One"</span></div><div class="line">        <span class="string">"Hello"</span> -&gt; <span class="string">"Greeting"</span></div><div class="line">        <span class="keyword">is</span> <span class="built_in">Long</span> -&gt; <span class="string">"Long"</span></div><div class="line">        !<span class="keyword">is</span> String -&gt; <span class="string">"Not a string"</span></div><div class="line">        <span class="keyword">else</span> -&gt; <span class="string">"Unknown"</span></div><div class="line">	&#125;</div><div class="line"><span class="comment">//sampleEnd</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    println(describe(<span class="number">1</span>))</div><div class="line">    println(describe(<span class="string">"Hello"</span>))</div><div class="line">    println(describe(<span class="number">1000</span>L))</div><div class="line">    println(describe(<span class="number">2</span>))</div><div class="line">    println(describe(<span class="string">"other"</span>))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用区间range"><a href="#使用区间（range）" class="headerlink" title="使用区间（range）"></a>使用区间（range）</h3><p>使用 in 运算符来检测某个数字是否在指定区间内：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    <span class="keyword">val</span> x = <span class="number">10</span></div><div class="line">    <span class="keyword">val</span> y = <span class="number">9</span></div><div class="line">    <span class="keyword">if</span> (x <span class="keyword">in</span> <span class="number">1.</span>.y+<span class="number">1</span>) &#123;</div><div class="line">    	println(<span class="string">"fits in range"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>检测某个数字是否在指定区间外:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    <span class="keyword">val</span> list = listOf(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</div><div class="line">    <span class="keyword">if</span> (<span class="number">-1</span> !<span class="keyword">in</span> <span class="number">0.</span>.list.lastIndex) &#123;</div><div class="line">        println(<span class="string">"-1 is out of range"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (list.size !<span class="keyword">in</span> list.indices) &#123;</div><div class="line">        println(<span class="string">"list size is out of valid list indices range too"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>区间迭代：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    <span class="keyword">for</span> (x <span class="keyword">in</span> <span class="number">1.</span><span class="number">.5</span>) &#123;</div><div class="line">    	print(x)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或数列迭代：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    <span class="keyword">for</span> (x <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10</span> step <span class="number">2</span>) &#123;</div><div class="line">    	print(x)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (x <span class="keyword">in</span> <span class="number">9</span> downTo <span class="number">0</span> step <span class="number">3</span>) &#123;</div><div class="line">    	print(x)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用集合"><a href="#使用集合" class="headerlink" title="使用集合"></a>使用集合</h3><p>对集合进行迭代：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="keyword">val</span> items = listOf(<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"kiwi"</span>)</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    <span class="keyword">for</span> (item <span class="keyword">in</span> items) &#123;</div><div class="line">    	println(item)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用 in 运算符来判断集合内是否包含某实例：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line">    <span class="keyword">val</span> items = setOf(<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"kiwi"</span>)</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    <span class="keyword">when</span> &#123;</div><div class="line">        <span class="string">"orange"</span> <span class="keyword">in</span> items -&gt; println(<span class="string">"juicy"</span>)</div><div class="line">        <span class="string">"apple"</span> <span class="keyword">in</span> items -&gt; println(<span class="string">"apple is fine too"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用 lambda 表达式来过滤（filter）和映射（map）集合：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</div><div class="line"><span class="keyword">val</span> fruits = listOf(<span class="string">"banana"</span>, <span class="string">"avocado"</span>, <span class="string">"apple"</span>, <span class="string">"kiwi"</span>)</div><div class="line">    <span class="comment">//sampleStart</span></div><div class="line">    fruits</div><div class="line">        .filter &#123; it.startsWith(<span class="string">"a"</span>) &#125;</div><div class="line">        .sortedBy &#123; it &#125;</div><div class="line">        .map &#123; it.toUpperCase() &#125;</div><div class="line">        .forEach &#123; println(it) &#125;</div><div class="line">    <span class="comment">//sampleEnd</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2017/08/06/kotlin（习惯用法）/" class="prev">PREV</a><a href="/2017/08/04/Kotlin/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 <a href="http://yoursite.com">John Doe</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>